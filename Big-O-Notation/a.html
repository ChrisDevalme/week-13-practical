<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Banking App</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
            text-align: center;
        }

        h1 {
            color: #004080;
            margin-bottom: 20px;
        }

        #profileContainer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        #userDetails {
            text-align: left;
        }

        #accountSelector {
            margin-top: 10px;
            text-align: left;
        }

        #balance {
            font-size: 24px;
            margin-bottom: 20px;
            color: #004080;
        }

        #transactionContainer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 20px;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        #transactionAmount,
        #categoryInput,
        #goalAmountInput {
            width: calc(33.33% - 10px);
            padding: 10px;
            font-size: 16px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            outline: none;
            transition: border-color 0.3s;
        }

        #transactionBtn,
        #setGoalBtn {
            width: calc(33.33% - 10px);
            padding: 10px 16px;
            font-size: 16px;
            cursor: pointer;
            background-color: #004080;
            color: #fff;
            border: none;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        #transactionBtn:hover,
        #setGoalBtn:hover {
            background-color: #00294e;
        }

        #transactionHistory {
            margin-top: 30px;
            text-align: left;
        }

        .transaction {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #fff;
        }

        .transaction.success {
            color: #008000;
            border: 1px solid #4caf50;
        }

        .transaction.failure {
            color: #ff0000;
            border: 1px solid #f44336;
        }

        .transaction .details {
            flex-grow: 1;
            text-align: left;
            margin-left: 20px;
        }

        .transaction .category {
            font-weight: bold;
            color: #004080;
        }

        #chartContainer,
        #goalTrackerContainer {
            margin-top: 30px;
        }

        canvas {
            max-width: 100%;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        #expenseChart,
        #savingsChart {
            margin-bottom: 20px;
        }

        #goalTracker {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        #goalAmountInput,
        #setGoalBtn {
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <h1>Smart Banking App</h1>

    <div id="profileContainer">
        <div id="userDetails">
            <p>Welcome, John Doe!</p>
            <p>User ID: 123456</p>
        </div>
        <div id="accountSelector"></div>
        <p id="balance">Balance: $1000</p>
    </div>

    <div id="transactionContainer">
        <input type="number" id="transactionAmount" placeholder="Enter amount">
        <input type="text" id="categoryInput" placeholder="Enter category">
        <button id="transactionBtn" onclick="performTransaction()">Make Transaction</button>

        <input type="number" id="goalAmountInput" placeholder="Set savings goal">
        <button id="setGoalBtn" onclick="setSavingsGoal()">Set Savings Goal</button>
    </div>

    <div id="transactionHistory"></div>

    <div id="chartContainer">
        <canvas id="expenseChart"></canvas>
    </div>

    <div id="goalTrackerContainer">
        <div id="goalTracker"></div>
        <canvas id="savingsChart"></canvas>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        let userAccounts = [
            { id: 1, name: 'Main Account', balance: 1000 },
            { id: 2, name: 'Savings Account', balance: 5000 },
            // Add more accounts as needed
        ];

        let selectedAccount = userAccounts[0];
        let transactions = [];
        let savingsGoal = 0;

        const profileContainer = document.getElementById('profileContainer');
        const accountSelector = document.getElementById('accountSelector');
        const balanceElement = document.getElementById('balance');
        const transactionHistoryElement = document.getElementById('transactionHistory');
        const expenseChart = document.getElementById('expenseChart').getContext('2d');
        const goalTrackerContainer = document.getElementById('goalTrackerContainer');
        const goalTracker = document.getElementById('goalTracker');
        const savingsChart = document.getElementById('savingsChart').getContext('2d');

        function initialize() {
            displayAccounts();
            updateBalance();
            updateTransactionHistory();
            updateExpenseChart();
            updateGoalTracker();
            updateSavingsChart();
        }

        function displayAccounts() {
            const select = document.createElement('select');
            select.addEventListener('change', onAccountChange);

            userAccounts.forEach(account => {
                const option = document.createElement('option');
                option.value = account.id;
                option.text = account.name;
                select.appendChild(option);
            });

            accountSelector.innerHTML = '<p>Select Account: </p>';
            accountSelector.appendChild(select);
            select.value = selectedAccount.id;
        }

        function onAccountChange(event) {
            const accountId = parseInt(event.target.value);
            selectedAccount = userAccounts.find(account => account.id === accountId);
            updateBalance();
            updateTransactionHistory();
            updateExpenseChart();
            updateGoalTracker();
            updateSavingsChart();
        }

        function performTransaction() {
            const transactionAmountInput = document.getElementById('transactionAmount');
            const transactionAmount = parseFloat(transactionAmountInput.value);
            const categoryInput = document.getElementById('categoryInput');
            const category = categoryInput.value.trim();

            if (!isNaN(transactionAmount) && category !== '') {
                const transactionResult = makeTransaction(transactionAmount, category);
                updateBalance();
                updateTransactionHistory();
                updateExpenseChart();
            }

            // Reset input fields
            transactionAmountInput.value = '';
            categoryInput.value = '';
        }

        function makeTransaction(amount, category) {
            if (selectedAccount.balance + amount < 0) {
                return 'failure';
            }

            selectedAccount.balance += amount;
            transactions.unshift({ amount, result: 'success', category, timestamp: new Date() });

            return 'success';
        }

        function updateBalance() {
            balanceElement.textContent = `Balance: $${selectedAccount.balance.toFixed(2)}`;
        }

        function updateTransactionHistory() {
            transactionHistoryElement.innerHTML = '<h2>Transaction History</h2>';
            
            transactions.forEach(transaction => {
                const transactionElement = document.createElement('div');
                transactionElement.className = `transaction ${transaction.result}`;
                transactionElement.innerHTML = `
                    <div class="details">
                        <p class="category">${transaction.category}</p>
                        <p>${transaction.result.charAt(0).toUpperCase() + transaction.result.slice(1)} transaction: $${transaction.amount.toFixed(2)}</p>
                    </div>
                    <p>${transaction.timestamp.toLocaleString()}</p>
                `;
                transactionHistoryElement.appendChild(transactionElement);
            });
        }

        function updateExpenseChart() {
            const categories = Array.from(new Set(transactions.map(transaction => transaction.category)));
            const categoryExpenses = categories.map(category => transactions
                .filter(transaction => transaction.category === category)
                .reduce((total, transaction) => total + transaction.amount, 0)
            );

            const data = {
                labels: categories,
                datasets: [{
                    label: 'Expense Categories',
                    backgroundColor: ['#4caf50', '#2196f3', '#ff9800', '#e91e63', '#607d8b'],
                    borderColor: '#fff',
                    data: categoryExpenses,
                }]
            };

            if (window.expenseChart) {
                window.expenseChart.destroy();
            }

            window.expenseChart = new Chart(expenseChart, {
                type: 'doughnut',
                data: data,
                options: {
                    legend: {
                        position: 'right',
                    },
                },
            });
        }

        function setSavingsGoal() {
            const goalAmountInput = document.getElementById('goalAmountInput');
            const goalAmount = parseFloat(goalAmountInput.value);

            if (!isNaN(goalAmount) && goalAmount >= 0) {
                savingsGoal = goalAmount;
                updateGoalTracker();
                updateSavingsChart();
            }

            // Reset input field
            goalAmountInput.value = '';
        }

        function updateGoalTracker() {
            goalTracker.innerHTML = `
                <h2>Savings Goal Tracker</h2>
                <p>Current Balance: $${selectedAccount.balance.toFixed(2)}</p>
                <p>Savings Goal: $${savingsGoal.toFixed(2)}</p>
                <p>Remaining to Goal: $${Math.max(0, savingsGoal - selectedAccount.balance).toFixed(2)}</p>
            `;
        }

        function updateSavingsChart() {
            const data = {
                labels: ['Savings', 'Remaining to Goal'],
                datasets: [{
                    backgroundColor: ['#4caf50', '#ff9800'],
                    data: [selectedAccount.balance, Math.max(0, savingsGoal - selectedAccount.balance)],
                }]
            };

            if (window.savingsChart) {
                window.savingsChart.destroy();
            }

            window.savingsChart = new Chart(savingsChart, {
                type: 'doughnut',
                data: data,
                options: {
                    legend: {
                        display: false,
                    },
                },
            });
        }

        // Initialize the app
        initialize();
    </script>

</body>
</html>
